<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-list/iron-list.html">
<link rel="import" href="../iron-dropdown/iron-dropdown.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-material/paper-material.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="datagrid-icons.html">
<link rel="import" href="radium-datagrid-row.html">
<link rel="import" href="radium-datagrid-column.html">

<!--
A Material Design inspired data grid element for Polymer.js apps.

TODO

@element radium-datagrid
@demo demo/index.html Basic configurations
@demo demo/index2.html Paging footer
@demo demo/index3.html Item selection
@demo demo/index4.html Fixed header
@demo demo/index5.html Infinite scroll
@demo demo/index6.html Infinite scroll 2
@demo demo/index7.html Column Filtering
-->
<dom-module id="radium-datagrid">
  <style>
    #list {
      height: 100%;
    }
    #list.hztl-lines ::content radium-datagrid-column {
      border-bottom-style: solid;
      border-bottom-width: 1px;
      border-bottom-color: var(--grid-line-color,#DDDDDD);
    }
    #list.vert-lines ::content radium-datagrid-column {
      border-right-style: solid;
      border-right-width: 1px;
      border-right-color: var(--grid-line-color,#DDDDDD);
    }
    #list.vert-lines ::content radium-datagrid-column:last-of-type {
      border-right: none;
    }
  </style>
  <template>
    <iron-list id="list" items="[[items]]" as="row">
      <content></content>
    </iron-list>
    <content id="template" select="template"></content>
  </template>
</dom-module>
<script>
  (function() {
    Polymer({
      is: 'radium-datagrid',
      properties: {
        i18nFunction: {
          type: Function,
          value: null
        },
        items: {
          type: Array,
          value: function(){return null;}
        },
        gridLines: {
          type: String,
          value: 'horizontal'
        },
      },
      behaviors: [Polymer.Templatizer],
      observers: [
        '_itemsChanged(items.*)',
        '_gridLinesChanged(gridLines)'
      ],
      _gridLoading: false,
      _itemsChanged: function(change) {
        this._gridLoading = false;
      },
      _gridLinesChanged: function() {
        this._updateGridLines();
      },
      _updateGridLines: function() {
        this.toggleClass('hztl-lines', false, this.$.list);
        this.toggleClass('vert-lines', false, this.$.list);
        if (this.gridLines.toLowerCase() === 'horizontal' || this.gridLines.toLowerCase() === 'both') {
          this.toggleClass('hztl-lines', true, this.$.list);
        }
        if (this.gridLines.toLowerCase() === 'vertical' || this.gridLines.toLowerCase() === 'both') {
          this.toggleClass('vert-lines', true, this.$.list);
        }
      },
      _computedTranslate: function(i18n, key, defaultVal) {
        return this._translate(key, defaultVal);
      },
      _translate: function(key, defaultVal) {
        if (this.i18nFunction) {
          return this.i18nFunction(key);
        } else {
          return defaultVal;
        }
      },
      setLoading: function() {
        this.items = null;
        this._gridLoading = true;
      },
      ready: function() {

      }
    });
  })();
</script>
